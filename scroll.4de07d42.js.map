{"mappings":"gkBAAAA,QAAQC,IAAI,UAUZ,MAGMC,EAAUC,SAASC,cAAc,YACjCC,EAAQF,SAASC,cAAc,SAClBD,SAASC,cAAc,gBAI/BE,iBAAiB,UAoC5B,SAAsBC,GACpBA,EAAEC,iBA8EFN,EAAQO,UAAY,GACpBC,EAAO,EA7EP,MAAMC,EAAgBN,EAAMO,MAAMC,OAElCC,EAASH,EAAeD,GAAMK,MAAKC,IACjC,GAAsB,KAAlBL,GAA6C,IAArBK,EAAOC,UACjC,OAAOC,EAAAC,GAASC,OAAOC,QACrB,4EAGFH,EAAAC,GAASC,OAAOE,QAAQ,oBAAoBN,EAAOC,qBACnDM,EAAoBP,EAAOQ,MAG3BC,EAAsBC,S,OAhD5B,MAAMD,EAAwB,IAAIP,EAAAS,GAAJ,CAAmB,aAAc,CAC7DC,aAAc,MACdC,gBAAiB,SACjBC,aAAc,IACdC,iBAAkB,EAElBC,eAAgB,GAChBC,UAAW,MAGb,IACIvB,EAAO,EAIXwB,eAAepB,EAASqB,EAAYC,GAClC,IACE,MAGMpB,SAHiBqB,EAAAC,QAAMC,IAC3B,qEAA4BJ,kEAA2EC,kBAEjFI,KAGxB,OADAxC,QAAQC,IAAIe,SACCA,C,CACb,MAAOyB,GAGPvB,EAAAC,GAASC,OAAOC,QACd,6D,EAgDN,SAASE,EAAoBmB,GAC3B,MAAMC,EAASD,EACZE,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,+CACKL,8BAA0CD,WAAsBE,aAAgBA,8IAGlDC,sHAGWC,oIAGGC,qIAGCC,iEAM5DC,KAAK,IACRlD,EAAQmD,mBAAmB,YAAaV,E,CAS1CW,OAAOhD,iBAAiB,UAAU,KAIhC,GAHqBH,SAASoD,gBAAgBC,wBAG7BC,OAAStD,SAASoD,gBAAgBG,aAAe,IAAK,CACrE1D,QAAQC,IAAI,QACZS,GAAQ,EAIRI,EAH8BT,EAAMO,MAAMC,OAGVH,GAAeK,MAAKC,IAClDO,EAAoBP,EAAOQ,MAC3BC,EAAsBC,UACtB,MAAMiC,EAAaC,KAAKC,KAAK7C,EAAOC,UAtH1B,IAuHVjB,QAAQC,IAAI0D,GACZ3D,QAAQC,IAAIS,GACRA,IAASiD,GAA6B,IAAfA,GAEzBzC,EAAAC,GAASC,OAAOC,QACd,6DACD,G","sources":["src/scroll.js"],"sourcesContent":["console.log('scroll');\nimport './sass/scroll.scss';\nimport Notiflix from 'notiflix';\n// console.log(Notiflix);\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// console.log(SimpleLightbox);\nimport axios from 'axios';\n// console.log(axios);\n\nconst KEY = '32856813-557b11f28047fc34e33f2f2e2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst gallery = document.querySelector('.gallery');\nconst input = document.querySelector('input');\nconst searchForm = document.querySelector('#search-form');\n// const btnLoadMore = document.querySelector('.load-more');\n\n// btnLoadMore.addEventListener('click', onBtnLoadMore);\nsearchForm.addEventListener('submit', onSearchForm);\n\n//const gallerySimpleLightbox = new SimpleLightbox('.gallery a');\nconst gallerySimpleLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  scrollZoomFactor: 2,\n  //   navText: ['*', '*'],\n  overlayOpacity: 0.9,\n  fadeSpeed: 300,\n});\n\nlet searchRequest = '';\nlet page = 1;\nconst perPage = 40;\n// btnLoadMore.style.display = 'none';\n\nasync function getPhoto(inputValue, pageNum) {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}?key=${KEY}&q=${inputValue}&image_type=photo&orientation=horizontal&safesearch=true&page=${pageNum}&per_page=40`\n    );\n    const images = response.data;\n    // console.log(images.hits);\n    console.log(images);\n    return await images;\n  } catch (error) {\n    // console.error(error);\n    //   throw new Error(console.log(error.message));\n    Notiflix.Notify.failure(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n}\n\nfunction onSearchForm(e) {\n  e.preventDefault();\n  clearGallery();\n  const searchRequest = input.value.trim();\n  //   const searchRequest = e.currentTarget.searchQuery.value.trim();\n  getPhoto(searchRequest, page).then(images => {\n    if (searchRequest === '' || images.totalHits === 0) {\n      return Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    } else {\n      Notiflix.Notify.success(`Hooray! We found ${images.totalHits} images.`);\n      renderMarkupGallery(images.hits);\n\n      //   btnLoadMore.style.display = 'block';\n      gallerySimpleLightbox.refresh();\n    }\n  });\n}\n\n// function onBtnLoadMore() {\n//   page += 1;\n//   btnLoadMore.style.display = 'none';\n//   //   gallerySimpleLightbox.destroy();\n//   const previousSearchRequest = input.value.trim();\n//   //console.log(previousSearchRequest);\n\n//   getPhoto(previousSearchRequest, page, perPage).then(images => {\n//     renderMarkupGallery(images.hits);\n//     gallerySimpleLightbox.refresh();\n//     const totalPages = Math.ceil(images.totalHits / perPage);\n//     console.log(totalPages);\n//     console.log(page);\n//     if (page === totalPages || totalPages === 1) {\n//     //   btnLoadMore.style.display = 'none';\n//       Notiflix.Notify.failure(\n//         \"We're sorry, but you've reached the end of search results.\"\n//       );\n//     }\n//   });\n// //   btnLoadMore.style.display = 'block';\n// }\n\nfunction renderMarkupGallery(arr) {\n  const markup = arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<div class=\"photo-card\">\n         <a href=\"${largeImageURL}\"><img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" loading=\"lazy\"/></a>\n          <div class=\"info\">\n             <p class=\"info-item\">\n      <b>Likes</b> <span class=\"info-item-api\"> ${likes} </span>\n  </p>\n              <p class=\"info-item\">\n                  <b>Views</b> <span class=\"info-item-api\">${views}</span>\n              </p>\n              <p class=\"info-item\">\n                  <b>Comments</b> <span class=\"info-item-api\">${comments}</span>\n              </p>\n              <p class=\"info-item\">\n                  <b>Downloads</b> <span class=\"info-item-api\">${downloads}</span>\n              </p>\n          </div>\n      </div>`;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n  page = 1;\n  //   btnLoadMore.style.display = 'none';\n}\n\nwindow.addEventListener('scroll', () => {\n  const documentRect = document.documentElement.getBoundingClientRect();\n  //   console.log('top', documentRect.top);\n  //   console.log('bottom', documentRect.bottom);\n  if (documentRect.bottom < document.documentElement.clientHeight + 150) {\n    console.log('DONE');\n    page += 1;\n    const previousSearchRequest = input.value.trim();\n    //   //console.log(previousSearchRequest);\n\n    getPhoto(previousSearchRequest, page, perPage).then(images => {\n      renderMarkupGallery(images.hits);\n      gallerySimpleLightbox.refresh();\n      const totalPages = Math.ceil(images.totalHits / perPage);\n      console.log(totalPages);\n      console.log(page);\n      if (page === totalPages || totalPages === 1) {\n        //   btnLoadMore.style.display = 'none';\n        Notiflix.Notify.failure(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n    });\n  }\n});\n"],"names":["console","log","$b02d73f657452650$var$gallery","document","querySelector","$b02d73f657452650$var$input","addEventListener","e","preventDefault","innerHTML","$b02d73f657452650$var$page","searchRequest1","value","trim","$b02d73f657452650$var$getPhoto","then","images","totalHits","$parcel$interopDefault","$7Y9D8","Notify","failure","success","$b02d73f657452650$var$renderMarkupGallery","hits","$b02d73f657452650$var$gallerySimpleLightbox","refresh","$fZKcF","captionsData","captionPosition","captionDelay","scrollZoomFactor","overlayOpacity","fadeSpeed","async","inputValue","pageNum","$2shzp","default","get","data","error","arr","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","window","documentElement","getBoundingClientRect","bottom","clientHeight","totalPages","Math","ceil"],"version":3,"file":"scroll.4de07d42.js.map"}