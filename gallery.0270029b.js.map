{"mappings":"gkBASA,MAGMA,EAAUC,SAASC,cAAc,YACjCC,EAAQF,SAASC,cAAc,SAC/BE,EAAaH,SAASC,cAAc,gBACpCG,EAAcJ,SAASC,cAAc,cAE3CG,EAAYC,iBAAiB,SAoD7B,WACEC,GAAQ,EACRF,EAAYG,MAAMC,QAAU,OAK5BC,EAH8BP,EAAMQ,MAAMC,OAGVL,GAAeM,MAAKC,IAClDC,EAAoBD,EAAOE,MAC3BC,EAAsBC,UACtB,MAAMC,EAAaC,KAAKC,KAAKP,EAAOQ,UA/CxB,IAgDZC,QAAQC,IAAIL,GACZI,QAAQC,IAAIjB,GACRA,IAASY,GAA6B,IAAfA,IACzBd,EAAYG,MAAMC,QAAU,OAC5BgB,EAAAC,GAASC,OAAOC,QACd,8D,IAINvB,EAAYG,MAAMC,QAAU,O,IAvE9BL,EAAWE,iBAAiB,UA+B5B,SAAsBuB,GACpBA,EAAEC,iBA8EF9B,EAAQ+B,UAAY,GACpBxB,EAAO,EACPF,EAAYG,MAAMC,QAAU,OA9E5B,MAAMuB,EAAgB7B,EAAMQ,MAAMC,OAElCF,EAASsB,EAAezB,GAAMM,MAAKC,IACjC,GAAsB,KAAlBkB,GAA6C,IAArBlB,EAAOQ,UACjC,OAAOG,EAAAC,GAASC,OAAOC,QACrB,4EAGFH,EAAAC,GAASC,OAAOM,QAAQ,oBAAoBnB,EAAOQ,qBACnDP,EAAoBD,EAAOE,MAE3BX,EAAYG,MAAMC,QAAU,QAC5BQ,EAAsBC,S,OA3C5B,MAAMD,EAAwB,IAAIQ,EAAAS,GAAJ,CAAmB,aAAc,CAC7DC,aAAc,MACdC,gBAAiB,SACjBC,aAAc,IACdC,iBAAkB,EAClBC,eAAgB,GAChBC,UAAW,MAGb,IACIjC,EAAO,EAIXkC,eAAe/B,EAASgC,EAAYC,GAClC,IACE,MAGM7B,SAHiB8B,EAAAC,QAAMC,IAC3B,qEAA4BJ,kEAA2EC,kBAEjFI,KAGxB,aAAajC,C,CACb,MAAOkC,GACPzB,QAAQyB,MAAMA,E,EA+ClB,SAASjC,EAAoBkC,GAC3B,MAAMC,EAASD,EACZE,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,+CACKL,8BAA0CD,WAAsBE,aAAgBA,8IAGlDC,sHAGWC,oIAGGC,qIAGCC,iEAM5DC,KAAK,IACR3D,EAAQ4D,mBAAmB,YAAaV,E,CA3F1C7C,EAAYG,MAAMC,QAAU","sources":["src/index.js"],"sourcesContent":["import './sass/gallery-style.scss';\nimport Notiflix from 'notiflix';\n//console.log(Notiflix);\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n//console.log(SimpleLightbox);\nimport axios from 'axios';\n//console.log(axios);\n\nconst KEY = '32856813-557b11f28047fc34e33f2f2e2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst gallery = document.querySelector('.gallery');\nconst input = document.querySelector('input');\nconst searchForm = document.querySelector('#search-form');\nconst btnLoadMore = document.querySelector('.load-more');\n\nbtnLoadMore.addEventListener('click', onBtnLoadMore);\nsearchForm.addEventListener('submit', onSearchForm);\n\n//const gallerySimpleLightbox = new SimpleLightbox('.gallery a');\nconst gallerySimpleLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  scrollZoomFactor: 2,\n  overlayOpacity: 0.9,\n  fadeSpeed: 300,\n});\n\nlet searchRequest = '';\nlet page = 1;\nconst perPage = 40;\nbtnLoadMore.style.display = 'none';\n\nasync function getPhoto(inputValue, pageNum) {\n  try {\n    const response = await axios.get(\n      `${BASE_URL}?key=${KEY}&q=${inputValue}&image_type=photo&orientation=horizontal&safesearch=true&page=${pageNum}&per_page=40`\n    );\n    const images = response.data;\n    //console.log(images.hits);\n    // console.log(images);\n    return await images;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction onSearchForm(e) {\n  e.preventDefault();\n  clearGallery();\n  const searchRequest = input.value.trim();\n  //   const searchRequest = e.currentTarget.searchQuery.value.trim();\n  getPhoto(searchRequest, page).then(images => {\n    if (searchRequest === '' || images.totalHits === 0) {\n      return Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    } else {\n      Notiflix.Notify.success(`Hooray! We found ${images.totalHits} images.`);\n      renderMarkupGallery(images.hits);\n\n      btnLoadMore.style.display = 'block';\n      gallerySimpleLightbox.refresh();\n    }\n  });\n}\n\nfunction onBtnLoadMore() {\n  page += 1;\n  btnLoadMore.style.display = 'none';\n  //   gallerySimpleLightbox.destroy();\n  const previousSearchRequest = input.value.trim();\n  //console.log(previousSearchRequest);\n\n  getPhoto(previousSearchRequest, page, perPage).then(images => {\n    renderMarkupGallery(images.hits);\n    gallerySimpleLightbox.refresh();\n    const totalPages = Math.ceil(images.totalHits / perPage);\n    console.log(totalPages);\n    console.log(page);\n    if (page === totalPages || totalPages === 1) {\n      btnLoadMore.style.display = 'none';\n      Notiflix.Notify.failure(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  });\n  btnLoadMore.style.display = 'block';\n}\n\nfunction renderMarkupGallery(arr) {\n  const markup = arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<div class=\"photo-card\">\n         <a href=\"${largeImageURL}\"><img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" loading=\"lazy\"/></a>\n          <div class=\"info\">\n             <p class=\"info-item\">\n      <b>Likes</b> <span class=\"info-item-api\"> ${likes} </span>\n  </p>\n              <p class=\"info-item\">\n                  <b>Views</b> <span class=\"info-item-api\">${views}</span>\n              </p>\n              <p class=\"info-item\">\n                  <b>Comments</b> <span class=\"info-item-api\">${comments}</span>\n              </p>\n              <p class=\"info-item\">\n                  <b>Downloads</b> <span class=\"info-item-api\">${downloads}</span>\n              </p>\n          </div>\n      </div>`;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n  page = 1;\n  btnLoadMore.style.display = 'none';\n}\n"],"names":["$1f0dc3b9307be026$var$gallery","document","querySelector","$1f0dc3b9307be026$var$input","$1f0dc3b9307be026$var$searchForm","$1f0dc3b9307be026$var$btnLoadMore","addEventListener","$1f0dc3b9307be026$var$page","style","display","$1f0dc3b9307be026$var$getPhoto","value","trim","then","images","$1f0dc3b9307be026$var$renderMarkupGallery","hits","$1f0dc3b9307be026$var$gallerySimpleLightbox","refresh","totalPages","Math","ceil","totalHits","console","log","$parcel$interopDefault","$7Y9D8","Notify","failure","e","preventDefault","innerHTML","searchRequest1","success","$fZKcF","captionsData","captionPosition","captionDelay","scrollZoomFactor","overlayOpacity","fadeSpeed","async","inputValue","pageNum","$2shzp","default","get","data","error","arr","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML"],"version":3,"file":"gallery.0270029b.js.map"}